{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { CountryISO, PhoneNumberFormat, SearchCountryField } from \"ngx-intl-tel-input\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"src/app/services/users/user-service.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"ngx-intl-tel-input\";\n\nfunction ForgotPasswordComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 11)(2, \"div\", 12);\n    i0.ɵɵtext(3, \" Desol\\u00E9, votre email n'est pas enregistrer \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction ForgotPasswordComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13)(2, \"div\", 14);\n    i0.ɵɵtext(3, \"Vous avez re\\u00E7u un code, regardez votre mail.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction ForgotPasswordComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13)(2, \"div\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.message, \"\");\n  }\n}\n\nfunction ForgotPasswordComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13)(2, \"div\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.message, \"\");\n  }\n}\n\nfunction ForgotPasswordComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13)(2, \"div\", 16);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.message, \"\");\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"is-invalid\": a0,\n    \"is-valid\": a1\n  };\n};\n\nfunction ForgotPasswordComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"label\", 18);\n    i0.ɵɵtext(2, \"Code de validation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r5.forgotPasswordForm.controls[\"email\"].invalid, ctx_r5.forgotPasswordForm.controls[\"email\"].valid));\n  }\n}\n\nconst _c1 = function (a0, a1) {\n  return [a0, a1];\n};\n\nconst _c2 = function (a2) {\n  return {\n    validation: \"required\",\n    message: \"Number is required\",\n    control: a2\n  };\n};\n\nconst _c3 = function (a2) {\n  return {\n    validation: \"email\",\n    message: \"numero pas valide\",\n    control: a2\n  };\n};\n\nconst _c4 = function (a2) {\n  return {\n    validation: \"minLength\",\n    message: \"Number should have at least 3 symbols\",\n    control: a2\n  };\n};\n\nconst _c5 = function (a2) {\n  return {\n    validation: \"maxLength\",\n    message: \"Number should have maximum 360 symbols\",\n    control: a2\n  };\n};\n\nfunction ForgotPasswordComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"label\", 18);\n    i0.ɵɵtext(2, \"Numero\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ngx-intl-tel-input\", 20);\n    i0.ɵɵelementContainer(4, 21)(5, 21)(6, 21)(7, 21);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n\n    const _r10 = i0.ɵɵreference(18);\n\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"selectedCountryISO\", ctx_r6.selectedCountryISO)(\"preferredCountries\", ctx_r6.preferredCountries)(\"enableAutoCountrySelect\", false)(\"enablePlaceholder\", true)(\"searchCountryFlag\", true)(\"numberFormat\", ctx_r6.PhoneNumberFormat.National)(\"searchCountryField\", i0.ɵɵpureFunction2(16, _c1, ctx_r6.SearchCountryField.Iso2, ctx_r6.SearchCountryField.Name))(\"ngClass\", i0.ɵɵpureFunction2(19, _c0, ctx_r6.forgotPasswordForm.controls[\"email\"].invalid, ctx_r6.forgotPasswordForm.controls[\"email\"].valid));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(22, _c2, ctx_r6.forgotPasswordForm.controls[\"email\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(24, _c3, ctx_r6.forgotPasswordForm.controls[\"email\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(26, _c4, ctx_r6.forgotPasswordForm.controls[\"email\"]));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r10)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(28, _c5, ctx_r6.forgotPasswordForm.controls[\"email\"]));\n  }\n}\n\nfunction ForgotPasswordComponent_button_14_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 24);\n    i0.ɵɵtext(2, \" Please wait... \");\n    i0.ɵɵelement(3, \"span\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction ForgotPasswordComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 22)(1, \"span\", 23);\n    i0.ɵɵlistener(\"click\", function ForgotPasswordComponent_button_14_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.submit());\n    });\n    i0.ɵɵtext(2, \"Submit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ForgotPasswordComponent_button_14_ng_container_3_Template, 4, 0, \"ng-container\", 4);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 1, ctx_r7.isLoading$));\n  }\n}\n\nfunction ForgotPasswordComponent_a_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 26);\n    i0.ɵɵtext(1, \" Cancel \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ForgotPasswordComponent_a_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 27);\n    i0.ɵɵtext(1, \" Validation \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ForgotPasswordComponent_ng_template_17_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 28)(2, \"div\", 29)(3, \"span\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const message_r16 = i0.ɵɵnextContext().message;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(message_r16);\n  }\n}\n\nfunction ForgotPasswordComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ForgotPasswordComponent_ng_template_17_ng_container_0_Template, 5, 1, \"ng-container\", 4);\n  }\n\n  if (rf & 2) {\n    const control_r15 = ctx.control;\n    const validation_r17 = ctx.validation;\n    i0.ɵɵproperty(\"ngIf\", control_r15.hasError(validation_r17) && (control_r15.dirty || control_r15.touched));\n  }\n}\n\nvar ErrorStates;\n\n(function (ErrorStates) {\n  ErrorStates[ErrorStates[\"NotSubmitted\"] = 0] = \"NotSubmitted\";\n  ErrorStates[ErrorStates[\"HasError\"] = 1] = \"HasError\";\n  ErrorStates[ErrorStates[\"NoError\"] = 2] = \"NoError\";\n})(ErrorStates || (ErrorStates = {}));\n\nexport class ForgotPasswordComponent {\n  constructor(fb, cdr, authService, userServices) {\n    this.fb = fb;\n    this.cdr = cdr;\n    this.authService = authService;\n    this.userServices = userServices;\n    this.errorState = ErrorStates.NotSubmitted;\n    this.errorStates = ErrorStates; // private fields\n\n    this.unsubscribe = []; // Read more: => https://brianflove.com/2016/12/11/anguar-2-unsubscribe-observables/\n\n    this.separateDialCode = true;\n    this.SearchCountryField = SearchCountryField;\n    this.CountryISO = CountryISO;\n    this.PhoneNumberFormat = PhoneNumberFormat;\n    this.preferredCountries = [CountryISO.CôteDIvoire, CountryISO.France];\n    this.code = \"\";\n    this.message = \"\";\n    this.ErrorSubmitted = \"false\";\n    this.isLoading$ = this.authService.isLoading$;\n  }\n\n  ngOnInit() {\n    this.selectedCountryISO = 'CI';\n    this.initForm();\n  } // convenience getter for easy access to form fields\n\n\n  get f() {\n    return this.forgotPasswordForm.controls;\n  }\n\n  initForm() {\n    this.forgotPasswordForm = this.fb.group({\n      email: ['', Validators.compose([Validators.required, // Validators.email,\n      Validators.minLength(10), Validators.maxLength(10) // https://stackoverflow.com/questions/386294/what-is-the-maximum-length-of-a-valid-email-address\n      ])],\n      code: ['', Validators.compose([Validators.required // Validators.email,\n      // Validators.minLength(10),\n      // Validators.maxLength(10),\n      // https://stackoverflow.com/questions/386294/what-is-the-maximum-length-of-a-valid-email-address\n      ])]\n    });\n  }\n\n  validate() {\n    console.log(\"go\");\n\n    if (this.code === this.f.code.value) {\n      this.message = \"code validé\";\n      this.ErrorSubmitted = \"valide\";\n      this.cdr.detectChanges();\n    } else {\n      this.ErrorSubmitted = \"notvalide\";\n      this.message = \"ce code n est pas valide\";\n      this.cdr.detectChanges();\n    }\n  }\n\n  submit() {\n    this.code = String(Math.floor(100000 + Math.random() * 900000));\n    var num = this.f.email.value.dialCode + \" \" + this.f.email.value.number;\n    console.log(num);\n    this.userServices.forgetpassword(num, this.code).subscribe(data => {\n      if (data.response.code === \"200\") {\n        this.ErrorSubmitted = \"good\";\n        this.cdr.detectChanges();\n      } else if (data.response.code == \"404\") {\n        this.message = data.response.message;\n        this.ErrorSubmitted = \"true\";\n        this.cdr.detectChanges();\n      } else {}\n\n      console.log(data);\n    }); //  console.log(\"Submit\");  \n    // \n    // const forgotPasswordSubscr = this.authService\n    //   .forgotPassword(this.f.email.value)\n    //   .pipe(first())\n    //   .subscribe((result: boolean) => {\n    //     this.errorState = result ? ErrorStates.NoError : ErrorStates.HasError;\n    //   });\n    // this.unsubscribe.push(forgotPasswordSubscr);\n  }\n\n}\n\nForgotPasswordComponent.ɵfac = function ForgotPasswordComponent_Factory(t) {\n  return new (t || ForgotPasswordComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.UserServiceService));\n};\n\nForgotPasswordComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ForgotPasswordComponent,\n  selectors: [[\"app-forgot-password\"]],\n  decls: 19,\n  vars: 11,\n  consts: [[\"novalidate\", \"novalidate\", \"id\", \"kt_login_password_reset_form\", 1, \"form\", \"w-100\", 3, \"formGroup\", \"ngSubmit\"], [1, \"text-center\", \"mb-10\"], [1, \"text-dark\", \"fw-bolder\", \"mb-3\"], [1, \"text-gray-500\", \"fw-semibold\", \"fs-6\"], [4, \"ngIf\"], [\"class\", \"fv-row mb-8\", 4, \"ngIf\"], [1, \"d-flex\", \"flex-wrap\", \"justify-content-center\", \"pb-lg-0\"], [\"type\", \"submit\", \"id\", \"kt_password_reset_submit\", \"class\", \"btn btn-primary me-4\", 4, \"ngIf\"], [\"routerLink\", \"/auth/login\", \"id\", \"kt_login_password_reset_form_cancel_button\", \"class\", \"btn btn-light\", 4, \"ngIf\"], [\"click\", \"validate()\", \"id\", \"kt_login_password_reset_form_cancel_button\", \"class\", \"btn btn-light\", 4, \"ngIf\"], [\"formError\", \"\"], [1, \"mb-lg-15\", \"alert\", \"alert-danger\"], [1, \"alert-text\", \"font-weight-bold\"], [1, \"mb-10\", \"bg-light-info\", \"p-8\", \"rounded\"], [1, \"text-info\"], [1, \"text-info\", 2, \"color\", \"red !important\"], [1, \"text-info\", 2, \"color\", \"green !important\"], [1, \"fv-row\", \"mb-8\"], [1, \"form-label\", \"fw-bolder\", \"text-gray-900\", \"fs-6\"], [\"type\", \"email\", \"formControlName\", \"code\", \"placeholder\", \"Code de validation\", \"name\", \"code\", \"autocomplete\", \"off\", 1, \"form-control\", \"bg-transparent\", 3, \"ngClass\"], [\"customPlaceholder\", \"0709344574\", \"type\", \"tel\", \"id\", \"phone\", \"name\", \"email\", \"formControlName\", \"email\", \"autocomplete\", \"off\", 1, \"form-control\", \"bg-transparent\", 2, \"padding-right\", \"calc(15.5em + 1.55rem)!important\", \"padding-top\", \"0px\", \"padding-bottom\", \"0px\", 3, \"selectedCountryISO\", \"preferredCountries\", \"enableAutoCountrySelect\", \"enablePlaceholder\", \"searchCountryFlag\", \"numberFormat\", \"searchCountryField\", \"ngClass\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"type\", \"submit\", \"id\", \"kt_password_reset_submit\", 1, \"btn\", \"btn-primary\", \"me-4\"], [1, \"indicator-label\", 3, \"click\"], [1, \"indicator-progress\"], [1, \"spinner-border\", \"spinner-border-sm\", \"align-middle\", \"ms-2\"], [\"routerLink\", \"/auth/login\", \"id\", \"kt_login_password_reset_form_cancel_button\", 1, \"btn\", \"btn-light\"], [\"click\", \"validate()\", \"id\", \"kt_login_password_reset_form_cancel_button\", 1, \"btn\", \"btn-light\"], [1, \"fv-plugins-message-container\"], [1, \"fv-help-block\"], [\"role\", \"alert\"]],\n  template: function ForgotPasswordComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function ForgotPasswordComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \" Mot de passe oubli\\u00E9 ? \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵtext(5, \" Enter votre numero pour reinitialiser le mot de passe. \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(6, ForgotPasswordComponent_ng_container_6_Template, 4, 0, \"ng-container\", 4);\n      i0.ɵɵtemplate(7, ForgotPasswordComponent_ng_container_7_Template, 4, 0, \"ng-container\", 4);\n      i0.ɵɵtemplate(8, ForgotPasswordComponent_ng_container_8_Template, 4, 1, \"ng-container\", 4);\n      i0.ɵɵtemplate(9, ForgotPasswordComponent_ng_container_9_Template, 4, 1, \"ng-container\", 4);\n      i0.ɵɵtemplate(10, ForgotPasswordComponent_ng_container_10_Template, 4, 1, \"ng-container\", 4);\n      i0.ɵɵtemplate(11, ForgotPasswordComponent_div_11_Template, 4, 4, \"div\", 5);\n      i0.ɵɵtemplate(12, ForgotPasswordComponent_div_12_Template, 8, 30, \"div\", 5);\n      i0.ɵɵelementStart(13, \"div\", 6);\n      i0.ɵɵtemplate(14, ForgotPasswordComponent_button_14_Template, 5, 3, \"button\", 7);\n      i0.ɵɵtemplate(15, ForgotPasswordComponent_a_15_Template, 2, 0, \"a\", 8);\n      i0.ɵɵtemplate(16, ForgotPasswordComponent_a_16_Template, 2, 0, \"a\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(17, ForgotPasswordComponent_ng_template_17_Template, 1, 1, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.forgotPasswordForm);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorState === ctx.errorStates.HasError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted === \"good\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted === \"true\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted === \"notvalide\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted === \"valide\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted === \"good\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted !== \"good\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted !== \"good\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted !== \"good\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ErrorSubmitted == \"good\");\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgIf, i4.NgTemplateOutlet, i5.RouterLinkWithHref, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.NgxIntlTelInputComponent, i6.NativeElementInjectorDirective, i4.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n  width: 100%;\\n}\\n[_nghost-%COMP%]   a#kt_login_password_reset_form_cancel_button[_ngcontent-%COMP%] {\\n  background: darkslategrey;\\n  color: white;\\n}\\n[_nghost-%COMP%]   a#kt_login_password_reset_form_cancel_button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   [_ngcontent-%COMP%]:active, [_nghost-%COMP%]   [_ngcontent-%COMP%]:focus {\\n  background: white;\\n  color: darkslategrey;\\n}\\n@media (min-width: 992px) {\\n  [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%] {\\n    width: 100%;\\n    max-width: 450px;\\n  }\\n  [_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcmdvdC1wYXNzd29yZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQVVFLFdBQUE7QUFSRjtBQURFO0VBQ0UseUJBQUE7RUFDQSxZQUFBO0FBR0o7QUFBQTtFQUNFLGlCQUFBO0VBQ0Esb0JBQUE7QUFFRjtBQUNFO0VBQ0U7SUFDRSxXQUFBO0lBQ0EsZ0JBQUE7RUFDSjtFQUNJO0lBQ0UsV0FBQTtFQUNOO0FBQ0YiLCJmaWxlIjoiZm9yZ290LXBhc3N3b3JkLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBhI2t0X2xvZ2luX3Bhc3N3b3JkX3Jlc2V0X2Zvcm1fY2FuY2VsX2J1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogZGFya3NsYXRlZ3JleTtcbiAgICBjb2xvcjogd2hpdGU7XG59XG5cbmEja3RfbG9naW5fcGFzc3dvcmRfcmVzZXRfZm9ybV9jYW5jZWxfYnV0dG9uOmhvdmVyLDphY3RpdmUsOmZvY3VzIHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGNvbG9yOiBkYXJrc2xhdGVncmV5O1xufSBcbiAgd2lkdGg6IDEwMCU7XG4gIEBtZWRpYSAobWluLXdpZHRoOiA5OTJweCkge1xuICAgIC5sb2dpbi1mb3JtIHtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgbWF4LXdpZHRoOiA0NTBweDtcblxuICAgICAgLm1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","CountryISO","PhoneNumberFormat","SearchCountryField","i0","ctx_r6","ErrorStates","ForgotPasswordComponent","constructor","fb","cdr","authService","userServices","NotSubmitted","CôteDIvoire","France","isLoading$","ngOnInit","selectedCountryISO","initForm","f","forgotPasswordForm","controls","group","email","compose","required","minLength","maxLength","code","validate","console","log","value","message","ErrorSubmitted","detectChanges","submit","String","Math","floor","random","num","dialCode","number","forgetpassword","subscribe","data","response","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/mac/Documents/2PAI_MIGRATION_PROJECT/ogrand_marche_admin/src/app/modules/auth/components/forgot-password/forgot-password.component.ts","/Users/mac/Documents/2PAI_MIGRATION_PROJECT/ogrand_marche_admin/src/app/modules/auth/components/forgot-password/forgot-password.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Observable, Subscription } from 'rxjs';\nimport { AuthService } from '../../services/auth.service';\nimport { first } from 'rxjs/operators';\nimport {\n  CountryISO,\n  PhoneNumberFormat,\n  SearchCountryField,\n  \n} from \"ngx-intl-tel-input\";\nimport { UserServiceService } from 'src/app/services/users/user-service.service';\nenum ErrorStates {\n  NotSubmitted,\n  HasError,\n  NoError,\n}\n\n@Component({\n  selector: 'app-forgot-password',\n  templateUrl: './forgot-password.component.html',\n  styleUrls: ['./forgot-password.component.scss'],\n})\nexport class ForgotPasswordComponent implements OnInit {\n  forgotPasswordForm: FormGroup;\n  errorState: ErrorStates = ErrorStates.NotSubmitted;\n  errorStates = ErrorStates;\n  isLoading$: Observable<boolean>;\n\n  // private fields\n  private unsubscribe: Subscription[] = []; // Read more: => https://brianflove.com/2016/12/11/anguar-2-unsubscribe-observables/\n  constructor(private fb: FormBuilder, private cdr: ChangeDetectorRef,private authService: AuthService,public userServices:UserServiceService,) {\n    this.isLoading$ = this.authService.isLoading$;\n  }\n  selectedCountryISO:any\n  ngOnInit(): void {\n    this.selectedCountryISO = 'CI';\n    this.initForm();\n  }\n  separateDialCode = true;\n  SearchCountryField = SearchCountryField;\n  CountryISO = CountryISO;\n  PhoneNumberFormat = PhoneNumberFormat;\n \n  preferredCountries: CountryISO[] = [CountryISO.CôteDIvoire, \n   CountryISO.France];\n  // convenience getter for easy access to form fields\n  get f() {\n    return this.forgotPasswordForm.controls;\n  }\n\n  initForm() {\n    this.forgotPasswordForm = this.fb.group({\n      email: [\n        '',\n        Validators.compose([\n          Validators.required,\n          // Validators.email,\n          Validators.minLength(10),\n          Validators.maxLength(10), // https://stackoverflow.com/questions/386294/what-is-the-maximum-length-of-a-valid-email-address\n        ]),\n      ],\n      code: [\n        '',\n        Validators.compose([\n          Validators.required,\n          // Validators.email,\n          // Validators.minLength(10),\n          // Validators.maxLength(10),\n           // https://stackoverflow.com/questions/386294/what-is-the-maximum-length-of-a-valid-email-address\n        ]),\n      ],\n    });\n  }\n  code=\"\";\n  message=\"\";\n  ErrorSubmitted = \"false\";\n\n  validate(){\n    console.log(\"go\")\n    if(this.code ===this.f.code.value){\n      this.message = \"code validé\"\n      this.ErrorSubmitted = \"valide\"\n      this.cdr.detectChanges()\n    }else{\n      this.ErrorSubmitted = \"notvalide\"\n      this.message = \"ce code n est pas valide\"\n      this.cdr.detectChanges()\n\n    }\n  }\n  submit() {\n    this.code = String(Math.floor(100000 + Math.random() * 900000));\n    var num =this.f.email.value.dialCode+\" \"+this.f.email.value.number;\n    console.log(num);\n    this.userServices.forgetpassword(num,this.code).subscribe((data:any) => {\n\n\n      if(data.response.code ===\"200\"){\n        this.ErrorSubmitted = \"good\";\n        this.cdr.detectChanges();\n      }else if(data.response.code ==\"404\"){ \n        this.message  = data.response.message\n        this.ErrorSubmitted = \"true\";\n        this.cdr.detectChanges();\n      }else{\n\n\n      }\n      console.log(data);    \n\n    })\n    //  console.log(\"Submit\");  \n    // \n    // const forgotPasswordSubscr = this.authService\n    //   .forgotPassword(this.f.email.value)\n    //   .pipe(first())\n    //   .subscribe((result: boolean) => {\n    //     this.errorState = result ? ErrorStates.NoError : ErrorStates.HasError;\n    //   });\n    // this.unsubscribe.push(forgotPasswordSubscr);\n\n  }\n}\n","<form\n  class=\"form w-100\"\n  novalidate=\"novalidate\"\n  [formGroup]=\"forgotPasswordForm\"\n  (ngSubmit)=\"submit()\"\n  id=\"kt_login_password_reset_form\"\n>\n  <!--begin::Heading-->\n  <div class=\"text-center mb-10\">\n    <!--begin::Title--> \n    <h1 class=\"text-dark fw-bolder mb-3\">\n        Mot de passe oublié ?\n    </h1>\n    <!--end::Title-->\n\n    <!--begin::Link-->\n    <div class=\"text-gray-500 fw-semibold fs-6\">\n        Enter votre numero pour reinitialiser le mot de passe.\n    </div>\n    <!--end::Link-->\n</div>\n<!--begin::Heading-->\n\n  <!-- begin::Alert error-->\n  <ng-container *ngIf=\"errorState === errorStates.HasError\">\n    <div class=\"mb-lg-15 alert alert-danger\">\n      <div class=\"alert-text font-weight-bold\">\n        Desolé, votre email n'est pas enregistrer\n      </div>\n    </div>\n  </ng-container>\n  <!-- end::Alert error-->\n\n  <ng-container *ngIf=\"ErrorSubmitted === 'good'\">\n    <div class=\"mb-10 bg-light-info p-8 rounded\">\n      <!--begin::Body-->\n      <div class=\"text-info\">Vous avez reçu un code, regardez votre mail.</div>\n      <!--end::Body-->\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"ErrorSubmitted === 'true'\">\n    <div class=\"mb-10 bg-light-info p-8 rounded\">\n      <!--begin::Body-->\n      <div class=\"text-info\"style=\"color: red !important;\"> {{message}}</div>\n      <!--end::Body-->\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"ErrorSubmitted === 'notvalide'\">\n    <div class=\"mb-10 bg-light-info p-8 rounded\">\n      <!--begin::Body-->\n      <div class=\"text-info\"style=\"color: red !important;\"> {{message}}</div>\n      <!--end::Body-->\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"ErrorSubmitted === 'valide'\">\n    <div class=\"mb-10 bg-light-info p-8 rounded\">\n      <!--begin::Body-->\n      <div class=\"text-info\"style=\"color: green !important;\"> {{message}}</div>\n      <!--end::Body-->\n    </div>\n  </ng-container>\n  <div class=\"fv-row mb-8\" *ngIf=\"ErrorSubmitted === 'good'\">\n    <label class=\"form-label fw-bolder text-gray-900 fs-6\">Code de validation</label>\n      \n      <input\n      class=\"form-control bg-transparent\"\n      type=\"email\"\n      formControlName=\"code\"\n      placeholder=\"Code de validation\"\n      name=\"code\"\n      autocomplete=\"off\"\n      [ngClass]=\"{\n        'is-invalid': forgotPasswordForm.controls['email'].invalid,\n        'is-valid': forgotPasswordForm.controls['email'].valid\n      }\"\n    />\n    \n  </div>\n  <div class=\"fv-row mb-8\" *ngIf=\"ErrorSubmitted !== 'good'\">\n    <label class=\"form-label fw-bolder text-gray-900 fs-6\">Numero</label>\n      <!--\n      <input\n      class=\"form-control bg-transparent\"\n      type=\"email\"\n      formControlName=\"email\"\n      placeholder=\"Email\"\n      name=\"email\"\n      autocomplete=\"off\"\n      [ngClass]=\"{\n        'is-invalid': forgotPasswordForm.controls['email'].invalid,\n        'is-valid': forgotPasswordForm.controls['email'].valid\n      }\"\n    />\n      -->\n\n\n\n    <ngx-intl-tel-input       \n    [selectedCountryISO]=\"selectedCountryISO\" \n    [preferredCountries]=\"preferredCountries\"\n    [enableAutoCountrySelect]=\"false\" \n    [enablePlaceholder]=\"true\" \n    [searchCountryFlag]=\"true\"\n    customPlaceholder = \"0709344574\"\n    [numberFormat]=\"PhoneNumberFormat.National\"\n    [searchCountryField]=\"[SearchCountryField.Iso2, SearchCountryField.Name]\" \n    style=\"padding-right: calc(15.5em + 1.55rem)!important; padding-top: 0px;padding-bottom: 0px;\" \n     class=\"form-control bg-transparent\" type=\"tel\"   id=\"phone\" name=\"email\" formControlName=\"email\" autocomplete=\"off\"\n    [ngClass]=\"{\n      'is-invalid': forgotPasswordForm.controls['email'].invalid,\n      'is-valid': forgotPasswordForm.controls['email'].valid\n    }\"></ngx-intl-tel-input>\n\n    <ng-container\n      [ngTemplateOutlet]=\"formError\"\n      [ngTemplateOutletContext]=\"{\n        validation: 'required',\n        message: 'Number is required',\n        control: forgotPasswordForm.controls['email']\n      }\"\n    ></ng-container>\n    <ng-container\n      [ngTemplateOutlet]=\"formError\"\n      [ngTemplateOutletContext]=\"{\n        validation: 'email',\n        message: 'numero pas valide',\n        control: forgotPasswordForm.controls['email']\n      }\"\n    ></ng-container>\n    <ng-container\n      [ngTemplateOutlet]=\"formError\"\n      [ngTemplateOutletContext]=\"{\n        validation: 'minLength',\n        message: 'Number should have at least 3 symbols',\n        control: forgotPasswordForm.controls['email']\n      }\"\n    ></ng-container>\n    <ng-container\n      [ngTemplateOutlet]=\"formError\"\n      [ngTemplateOutletContext]=\"{\n        validation: 'maxLength',\n        message: 'Number should have maximum 360 symbols',\n        control: forgotPasswordForm.controls['email']\n      }\"\n    ></ng-container>\n  </div>\n  <!--end::Form group-->\n  <!--begin::Form group-->\n  <div class=\"d-flex flex-wrap justify-content-center pb-lg-0\">\n    <button  *ngIf=\"ErrorSubmitted !== 'good'\"\n      type=\"submit\"\n      id=\"kt_password_reset_submit\"\n      class=\"btn btn-primary me-4\"\n    >\n      <span   (click)=\"submit()\"  class=\"indicator-label\">Submit</span>\n      <ng-container *ngIf=\"isLoading$ | async\">\n        <span class=\"indicator-progress\">\n          Please wait...\n          <span\n            class=\"spinner-border spinner-border-sm align-middle ms-2\"\n          ></span>\n        </span>\n      </ng-container>\n    </button>\n    <a  *ngIf=\"ErrorSubmitted !== 'good'\"\n      routerLink=\"/auth/login\"\n      id=\"kt_login_password_reset_form_cancel_button\"\n      class=\"btn btn-light\"\n    >\n      Cancel\n    </a>\n\n  <a  *ngIf=\"ErrorSubmitted == 'good'\"\n    click=\"validate()\"\n    id=\"kt_login_password_reset_form_cancel_button\"\n    class=\"btn btn-light\">\n    Validation\n  </a>\n  </div>\n\n  <!--end::Form group-->\n</form>\n<!--end::Form-->\n\n<ng-template\n  #formError\n  let-control=\"control\"\n  let-message=\"message\"\n  let-validation=\"validation\"\n>\n  <ng-container\n    *ngIf=\"control.hasError(validation) && (control.dirty || control.touched)\"\n  >\n    <div class=\"fv-plugins-message-container\">\n      <div class=\"fv-help-block\">\n        <span role=\"alert\">{{ message }}</span>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n"]},"metadata":{},"sourceType":"module"}